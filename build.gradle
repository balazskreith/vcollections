//The maven plugin has been deprecated. This is scheduled to be removed in Gradle 7.0. Please use the maven-publish plugin instead.
//        The compile configuration has been deprecated for dependency declaration. This will fail with an error in Gradle 7.0. Please use the implementation configuration instead.
//at build_f5ctilzhkt4w0wyo37h9iw45i$_run_closure2.doCall(/Users/balazskreith.finago/github/vcollections/build.gradle:24)
//(Run with --stacktrace to get the full stack trace of this deprecation warning.)
plugins {
    id 'java'
//    id 'maven'
    id 'maven-publish'
}

group 'wobserver'
version '0.7.0'

sourceCompatibility = 1.12
targetCompatibility = 1.12

repositories {
    mavenCentral()
}

dependencies {
//    testCompile group: 'junit', name: 'junit', version: '5.0'
    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.4.2'
    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.4.2'
//    compile 'org.mongodb:mongodb-driver-sync:3.11.1'
//    compile 'com.fasterxml.jackson.core:jackson-core:2.10.0'
//    compile 'com.fasterxml.jackson.core:jackson-annotations:2.10.0'
    compile group: 'org.slf4j', name: 'slf4j-simple', version: '1.6.1'


    compile group: 'javax.validation', name: 'validation-api', version: '1.0.0.GA'
    compile group: 'com.fasterxml.jackson.dataformat', name: 'jackson-dataformat-yaml', version: '2.5.0'
    compile 'com.fasterxml.jackson.core:jackson-databind:2.10.0'
    compile group: 'javax.validation', name: 'validation-api', version: '2.0.1.Final'
    compile group: 'org.hibernate', name: 'hibernate-validator', version: '4.2.0.Final'
    implementation "jakarta.xml.bind:jakarta.xml.bind-api:2.3.2"
    implementation "org.glassfish.jaxb:jaxb-runtime:2.3.2"
    // For Redis
    compile 'io.lettuce:lettuce-core:5.2.1.RELEASE'
}

test {
    useJUnitPlatform()
}

wrapper {
    distributionType = Wrapper.DistributionType.ALL
}

//uploadArchives {
//    repositories {
//        mavenDeployer {
//            repository(url: "https://nexus.wobserver.io") {
//                authentication(userName: "admin", password: "admin")
//            }
//            pom.version = "0.1.12"
//            pom.artifactId = "vcollections"
//            pom.groupId = "com.wobserver"
//        }
//    }
//}

publishing {
    repositories {
        maven {
            name = "vcollections"
            url = uri("https://maven.pkg.github.com/balazskreith/vcollections")
            credentials {
                username = project.findProperty("gpr.user") ?: System.getenv("USERNAME")
                password = project.findProperty("gpr.key") ?: System.getenv("PASSWORD")
            }
        }
    }
    publications {
        vcollections(MavenPublication) {
            from(components.java)
        }
    }
}

